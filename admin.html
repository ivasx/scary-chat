<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ê–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å - –°—Ç—Ä–∞—à–Ω–∏–π —á–∞—Ç</title>
  <link rel="stylesheet" href="styles/admin.css">
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>üëª –ê–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å —Å—Ç—Ä–∞—à–Ω–æ–≥–æ —á–∞—Ç—É</h1>
      <p>–ü–æ–≤–Ω–µ –∫–µ—Ä—É–≤–∞–Ω–Ω—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏, –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º–∏ —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è–º–∏ —á–∞—Ç—É</p>
    </div>

    <div class="sidebar">
      <!-- –ü–µ—Ä—Å–æ–Ω–∞–∂—ñ -->
      <div class="section">
        <h3>üé≠ –ü–µ—Ä—Å–æ–Ω–∞–∂—ñ</h3>
        <div class="characters-list" id="charactersList"></div>
        <button class="btn btn-primary" onclick="addNewCharacter()">+ –î–æ–¥–∞—Ç–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</button>
      </div>

      <!-- –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ -->
      <div class="section">
        <h3>‚öôÔ∏è –†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</h3>
        <div class="form-group">
          <label>–Ü–º'—è</label>
          <input type="text" class="input" id="charName" placeholder="–Ü–º'—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞">
        </div>
        <div class="form-group">
          <label>–ê–≤–∞—Ç–∞—Ä</label>
          <div style="display: flex; gap: 10px; align-items: center;">
            <input type="text" class="input" id="charAvatar" placeholder="üëª –∞–±–æ URL —Ñ–æ—Ç–æ" style="flex: 1;">
            <label for="avatarFile" class="file-upload-btn">
              üì∑ –§–æ—Ç–æ
            </label>
          </div>
          <input type="file" id="avatarFile" class="file-input" accept="image/*" onchange="handleAvatarUpload(event)">
          <div class="avatar-preview" id="avatarPreview">üëª</div>
        </div>
        <div class="form-group">
          <label>–ö–æ–ª—ñ—Ä</label>
          <input type="color" class="color-input" id="charColor" value="#ff4757">
        </div>
        <div class="form-group">
          <label>–¢–∏–ø</label>
          <select class="select" id="charType">
            <option value="ghost">–ü—Ä–∏–≤–∏–¥</option>
            <option value="demon">–î–µ–º–æ–Ω</option>
            <option value="spirit">–î—É—Ö</option>
            <option value="entity">–°—É—Ç–Ω—ñ—Å—Ç—å</option>
            <option value="other">–Ü–Ω—à–µ</option>
          </select>
        </div>
        <div class="form-group">
          <button class="btn btn-success" onclick="saveCharacter()">üíæ –ó–±–µ—Ä–µ–≥—Ç–∏</button>
          <button class="btn btn-danger" onclick="deleteCharacter()">üóëÔ∏è –í–∏–¥–∞–ª–∏—Ç–∏</button>
        </div>
      </div>
    </div>

    <div class="main-area">
      <h3>üí¨ –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è</h3>
      
      <!-- –®–≤–∏–¥–∫—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ -->
      <div class="quick-responses">
        <span class="quick-response" onclick="insertQuickResponse('–•—Ç–æ —Ç—É—Ç?')">–•—Ç–æ —Ç—É—Ç?</span>
        <span class="quick-response" onclick="insertQuickResponse('–Ø —á—É—é —Ç–µ–±–µ...')">–Ø —á—É—é —Ç–µ–±–µ...</span>
        <span class="quick-response" onclick="insertQuickResponse('–ù–µ –π–¥–∏...')">–ù–µ –π–¥–∏...</span>
        <span class="quick-response" onclick="insertQuickResponse('–•–æ–ª–æ–¥–Ω–æ... —Ç–∞–∫ —Ö–æ–ª–æ–¥–Ω–æ...')">–•–æ–ª–æ–¥–Ω–æ...</span>
        <span class="quick-response" onclick="insertQuickResponse('–î–æ–ø–æ–º–æ–∂–∏ –º–µ–Ω—ñ...')">–î–æ–ø–æ–º–æ–∂–∏ –º–µ–Ω—ñ...</span>
      </div>

      <div class="messages-container" id="messagesContainer"></div>

      <div class="message-input-container">
        <div style="flex: 1;">
          <!-- –ú–µ–¥—ñ–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è -->
          <div class="media-upload">
            <label for="photoFile" class="file-upload-btn">
              üì∑ –§–æ—Ç–æ
            </label>
            <label for="videoFile" class="file-upload-btn">
              üé¨ –í—ñ–¥–µ–æ
            </label>
            <div id="mediaPreview"></div>
          </div>
          
          <textarea 
            class="textarea message-textarea" 
            id="adminMessage" 
            placeholder="–ù–∞–ø–∏—à—ñ—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥—å –≤—ñ–¥ —ñ–º–µ–Ω—ñ –æ–±—Ä–∞–Ω–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞..."
          ></textarea>
          
          <!-- –í—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è -->
          <div id="replyPreview" style="display: none; background: rgba(60, 60, 60, 0.8); padding: 8px; border-radius: 6px; margin-top: 8px; border-left: 3px solid #007aff;">
            <div style="font-size: 12px; color: #007aff; margin-bottom: 4px;" id="replyToUser"></div>
            <div style="font-size: 13px; color: #ccc;" id="replyToText"></div>
            <button onclick="cancelReply()" style="position: absolute; right: 8px; top: 8px; background: none; border: none; color: #999; cursor: pointer;">√ó</button>
          </div>
        </div>
        
        <div class="message-actions">
          <button class="btn btn-success" onclick="sendMessage()">üì§ –ù–∞–¥—ñ—Å–ª–∞—Ç–∏</button>
          <button class="btn btn-secondary" onclick="simulateTyping()">‚å®Ô∏è –î—Ä—É–∫—É—î...</button>
          <button class="btn btn-danger" onclick="clearChat()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç–∏</button>
        </div>
      </div>
      
      <input type="file" id="photoFile" class="file-input" accept="image/*" onchange="handleMediaUpload(event, 'photo')">
      <input type="file" id="videoFile" class="file-input" accept="video/*" onchange="handleMediaUpload(event, 'video')">
    </div>

    <div class="right-panel">
      <!-- –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —á–∞—Ç—É -->
      <div class="section">
        <h3>üé® –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —á–∞—Ç—É</h3>
        <div class="form-group">
          <label>–ù–∞–∑–≤–∞ —á–∞—Ç—É</label>
          <input type="text" class="input" id="chatTitle" placeholder="–ú–µ—Ä—Ç–≤—ñ –¥—É—à—ñ">
        </div>
        <div class="form-group">
          <label>–§–æ–Ω —á–∞—Ç—É</label>
          <select class="select" id="backgroundSelect" onchange="updateBackground()">
            <option value="gradient1">–¢–µ–º–Ω–∏–π –≥—Ä–∞–¥—ñ—î–Ω—Ç</option>
            <option value="gradient2">–ß–µ—Ä–≤–æ–Ω–æ-—á–æ—Ä–Ω–∏–π</option>
            <option value="gradient3">–§—ñ–æ–ª–µ—Ç–æ–≤–æ-—á–æ—Ä–Ω–∏–π</option>
            <option value="gradient4">–ó–µ–ª–µ–Ω–æ-—á–æ—Ä–Ω–∏–π</option>
            <option value="gradient5">–°–∏–Ω—å–æ-—á–æ—Ä–Ω–∏–π</option>
            <option value="custom">–í–ª–∞—Å–Ω–µ —Ñ–æ—Ç–æ</option>
          </select>
          <div style="margin-top: 8px;">
            <label for="backgroundFile" class="file-upload-btn" id="backgroundUploadBtn" style="display: none;">
              üñºÔ∏è –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ñ–æ–Ω
            </label>
            <input type="file" id="backgroundFile" class="file-input" accept="image/*" onchange="handleBackgroundUpload(event)">
          </div>
          <div class="background-preview" id="backgroundPreview"></div>
        </div>
        
        <!-- –ö–æ–ª—å–æ—Ä–æ–≤–∞ —Å—Ö–µ–º–∞ -->
        <div class="form-group">
          <label>–ö–æ–ª—å–æ—Ä–æ–≤–∞ —Å—Ö–µ–º–∞</label>
          <select class="select" id="colorScheme" onchange="updateColorScheme()">
            <option value="default">–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º</option>
            <option value="dark">–¢–µ–º–Ω–∞</option>
            <option value="blue">–°–∏–Ω—è</option>
            <option value="green">–ó–µ–ª–µ–Ω–∞</option>
            <option value="red">–ß–µ—Ä–≤–æ–Ω–∞</option>
            <option value="purple">–§—ñ–æ–ª–µ—Ç–æ–≤–∞</option>
            <option value="custom">–í–ª–∞—Å–Ω–∞</option>
          </select>
          <div id="customColors" style="display: none; margin-top: 10px;">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
              <div>
                <label style="font-size: 12px;">–§–æ–Ω</label>
                <input type="color" class="color-input" id="customBgColor" value="#0f1419">
              </div>
              <div>
                <label style="font-size: 12px;">–ê–∫—Ü–µ–Ω—Ç</label>
                <input type="color" class="color-input" id="customAccentColor" value="#2b5278">
              </div>
            </div>
          </div>
          <div class="color-scheme-preview" id="colorPreview"></div>
        </div>
        
        <button class="btn btn-primary" onclick="saveSettings()">üíæ –ó–±–µ—Ä–µ–≥—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</button>
      </div>

      <!-- –ö–µ—Ä—É–≤–∞–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏ -->
      <div class="section">
        <h3>üë• –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ</h3>
        <div id="usersList">
          <div class="user-item">
            <div>
              <div style="font-weight: 500;">–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á #1</div>
              <div class="user-status">
                <div class="status-indicator online"></div>
                <span>–û–Ω–ª–∞–π–Ω</span>
              </div>
            </div>
            <div>
              <button class="btn btn-warning btn-sm" onclick="toggleMute('user1')">üîá –ó–∞–≥–ª—É—à–∏—Ç–∏</button>
            </div>
          </div>
        </div>
      </div>

      <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
      <div class="section">
        <h3>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
        <div style="font-size: 14px; line-height: 1.6;">
          <div>–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å: <span id="messagesCount">0</span></div>
          <div>–ü–µ—Ä—Å–æ–Ω–∞–∂—ñ–≤: <span id="charactersCount">0</span></div>
          <div>–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –æ–Ω–ª–∞–π–Ω: <span id="onlineCount">0</span></div>
        </div>
      </div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è -->
  <div class="edit-message-overlay" id="editMessageOverlay">
    <div class="edit-message-modal">
      <div class="modal-header">
        <h3>‚úèÔ∏è –†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è</h3>
        <button class="modal-close" onclick="closeEditModal()">√ó</button>
      </div>
      <div class="form-group">
        <label>–¢–µ–∫—Å—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è</label>
        <textarea class="textarea" id="editMessageText" rows="4"></textarea>
      </div>
      <div style="display: flex; gap: 10px; justify-content: flex-end;">
        <button class="btn btn-secondary" onclick="closeEditModal()">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
        <button class="btn btn-success" onclick="saveEditedMessage()">üíæ –ó–±–µ—Ä–µ–≥—Ç–∏</button>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="scripts/firebase-config.js"></script>
  <script src="scripts/admin-core.js"></script>
  <script src="scripts/admin-characters.js"></script>
  <script src="scripts/admin-messages.js"></script>
  <script src="scripts/admin-settings.js"></script>
  <script src="scripts/admin-ui.js"></script>
</body>
</html>